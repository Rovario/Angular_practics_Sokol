<div class="list-container">
  <h2>üìö –°–ø–∏—Å–æ–∫ –∫–Ω–∏–≥</h2>

  <!-- –ü–∞–Ω–µ–ª—å –ø–æ—à—É–∫—É —Ç–∞ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è -->
  <div class="controls">
    <div class="search-box">
      <input 
        type="text" 
        [(ngModel)]="searchText"
        placeholder="–ü–æ—à—É–∫ –∑–∞ –Ω–∞–∑–≤–æ—é –∞–±–æ –∞–≤—Ç–æ—Ä–æ–º..."
        class="search-input"
      />
      <button 
        *ngIf="searchText" 
        (click)="clearSearch()"
        class="clear-btn"
      >
        ‚úï
      </button>
    </div>

    <div class="sort-controls">
      <button 
        (click)="toggleSort('title')"
        [class.active]="sortBy === 'title'"
        class="sort-btn"
      >
        –ù–∞–∑–≤–∞ {{ sortBy === 'title' ? (sortAscending ? '‚Üë' : '‚Üì') : '' }}
      </button>
      <button 
        (click)="toggleSort('price')"
        [class.active]="sortBy === 'price'"
        class="sort-btn"
      >
        –¶—ñ–Ω–∞ {{ sortBy === 'price' ? (sortAscending ? '‚Üë' : '‚Üì') : '' }}
      </button>
      <button 
        (click)="toggleSort('date')"
        [class.active]="sortBy === 'date'"
        class="sort-btn"
      >
        –î–∞—Ç–∞ {{ sortBy === 'date' ? (sortAscending ? '‚Üë' : '‚Üì') : '' }}
      </button>
    </div>
  </div>

  <!-- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ -->
  <div *ngIf="filteredBooks.length === 0" class="no-results">
    <p *ngIf="searchText">
      üòî –ö–Ω–∏–≥ –∑–∞ –∑–∞–ø–∏—Ç–æ–º "{{ searchText }}" –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ
    </p>
    <p *ngIf="!searchText">
      üì≠ –°–ø–∏—Å–æ–∫ –∫–Ω–∏–≥ –ø—É—Å—Ç–∏–π
    </p>
  </div>

  <!-- –°–ø–∏—Å–æ–∫ –∫–Ω–∏–≥ -->
  <div class="books-grid" *ngIf="filteredBooks.length > 0">
    <!-- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ *ngFor, custom directive —Ç–∞ pipes -->
    <div 
      *ngFor="let book of filteredBooks; let i = index; let isFirst = first; let isLast = last"
      class="book-card"
      [appHighlight]="book.price"
      [priceThreshold]="500"
    >
      <!-- Badge –¥–ª—è –ø–µ—Ä—à–æ—ó —Ç–∞ –æ—Å—Ç–∞–Ω–Ω—å–æ—ó –∫–Ω–∏–≥–∏ -->
      <span *ngIf="isFirst" class="badge badge-first">–ü–µ—Ä—à–∞</span>
      <span *ngIf="isLast" class="badge badge-last">–û—Å—Ç–∞–Ω–Ω—è</span>

      <!-- –ù–æ–º–µ—Ä –∫–Ω–∏–≥–∏ -->
      <div class="book-number">{{ i + 1 }}</div>

      <!-- –ù–∞–∑–≤–∞ –∫–Ω–∏–≥–∏ –∑ custom pipe TitleCase -->
      <h3>{{ book.title | titleCase }}</h3>

      <!-- –ê–≤—Ç–æ—Ä -->
      <p class="author">
        <strong>–ê–≤—Ç–æ—Ä:</strong> {{ book.author }}
      </p>

      <!-- –¶—ñ–Ω–∞ –∑ –≤–±—É–¥–æ–≤–∞–Ω–∏–º pipe currency -->
      <p class="price">
        <strong>–¶—ñ–Ω–∞:</strong> 
        <span [ngClass]="{'expensive': book.price > 500, 'cheap': book.price <= 500}">
          {{ book.price | currency:'UAH':'symbol':'1.0-0' }}
        </span>
      </p>

      <!-- –î–∞—Ç–∞ –ø—É–±–ª—ñ–∫–∞—Ü—ñ—ó –∑ –≤–±—É–¥–æ–≤–∞–Ω–∏–º pipe date -->
      <p class="date">
        <strong>–û–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω–æ:</strong> 
        {{ book.publishedDate | date:'dd.MM.yyyy' }}
      </p>

      <!-- –û–ø–∏—Å (—è–∫—â–æ —î) -->
      <p *ngIf="book.description" class="description">
        {{ book.description }}
      </p>

      <!-- –ö–Ω–æ–ø–∫–∞ –¥–µ—Ç–∞–ª–µ–π -->
      <a [routerLink]="['/details', book.id]" class="details-btn">
        –î–µ—Ç–∞–ª—å–Ω—ñ—à–µ ‚Üí
      </a>
    </div>
  </div>

  <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
  <div class="stats" *ngIf="books.length > 0">
    <p>
      –£—Å—å–æ–≥–æ –∫–Ω–∏–≥: <strong>{{ books.length }}</strong> | 
      –ü–æ–∫–∞–∑–∞–Ω–æ: <strong>{{ filteredBooks.length }}</strong>
    </p>
  </div>
</div>